var Tree=function(){var t=function(t,o){this.elem=document.getElementById(t),this.options=o,this.init()};return t.prototype.init=function(){this.nodes=this.options.nodes||{},this.nodes.nowhere||(this.nodes.nowhere={nowhere:{text:"<p>You are not sure where you are.</p>"}}),this.flags=JSON.parse(JSON.stringify(this.options.flags))||{},this.elem.addEventListener("click",function(t){"BUTTON"===t.target.tagName&&this.selectOption(this.currentNode,t.target.value)}.bind(this)),this.currentNode=this.nodes[this.options.start||"start"],this.showNode(this.currentNode)},t.prototype.showNode=function(t){var o="",s="";if(t&&t.text||(console.log("No node, defaulting to nowhere"),t=this.nodes.nowhere),o=t.text,t.messages)for(var e=0;e<t.messages.length;e++){var i=t.messages[e];(!i.showIf&&!i.showIfNot||i.showIf&&this.flags[i.showIf]||i.showIfNot&&!this.flags[i.showIfNot])&&(o+=i.text)}if(t.options&&t.options.length>0)for(var n=0;n<t.options.length;n++)option=t.options[n],(!option.showIf&&!option.showIfNot||option.showIf&&this.flags[option.showIf]||option.showIfNot&&!this.flags[option.showIfNot])&&(s+="<li><button value='"+n+"'>"+option.label+"</li>");t.resetFlags&&(this.flags=JSON.parse(JSON.stringify(this.options.flags))),t.setFalse&&(this.flags[t.setFalse]=!1),t.setTrue&&(this.flags[t.setTrue]=!0),this.elem.innerHTML=o+s},t.prototype.selectOption=function(t,o){var s=t.options[o];this.currentNode=this.nodes[s.target],this.showNode(this.currentNode)},t}();